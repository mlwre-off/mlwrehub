-- Проверка поддержки loadstring в среде выполнения
if not loadstring then
    error("This environment does not support loadstring. Please use a compatible executor.")
end

-- Загрузка библиотеки KeyGuard
local KeyGuardLibrary = loadstring(game:HttpGet("https://cdn.keyguardian.org/library/v1.0.0.lua"))()

-- Настройка данных для проверки ключей
local trueData = "96627c7378614919b519349b7daf25dc"
local falseData = "760bca684ec74b28ac97d6a4025670c2"

KeyGuardLibrary.Set({
    publicToken = "ae076278268b43fdaac771ee939354b1",  
    privateToken = "28712e64120246d09e58b4ebfd538d24",
    trueData = trueData,
    falseData = falseData,
})

-- Функция для сохранения валидного ключа в файл
local function saveValidKey(key)
    writefile("keyguard.txt", key)
end

-- Функция для чтения ключа из файла
local function readValidKeyFromFile()
    local success, key = pcall(function()
        return readfile("keyguard.txt")
    end)
    if success then
        return key
    else
        return nil
    end
end

-- Функция проверки ключа
local function checkKey(key)
    local premiumResponse = KeyGuardLibrary.validatePremiumKey(key)
    if premiumResponse == trueData then
        return true, "premium"
    end
    local defaultResponse = KeyGuardLibrary.validateDefaultKey(key)
    if defaultResponse == trueData then
        return true, "default"
    end
    return false, nil
end

-- Основная функция, вызываемая при валидном ключе
local function onValidKey()
    makefolder("Questxscript")
    if _G.is_deltaandroid_loaded then
        print("already running")
        return
    end
    _G.is_deltaandroid_loaded = true
    local G2L = {}

    -- Функция создания анимаций UI
    local function createUIAnimations()
        local modernColors = {
            background = Color3.fromRGB(22, 22, 28),
            secondaryBackground = Color3.fromRGB(28, 28, 34),
            accent = Color3.fromRGB(235, 30, 70),
            accentSecondary = Color3.fromRGB(70, 120, 220),
            text = Color3.fromRGB(240, 240, 240),
            secondaryText = Color3.fromRGB(180, 180, 180)
        }
        return {
            colors = modernColors,
            appear = function(object, duration)
                duration = duration or 0.5
                object.BackgroundTransparency = 1
                object.Visible = true
                local originalTransparency = object:GetAttribute("OriginalTransparency") or 0
                game:GetService("TweenService"):Create(
                    object,
                    TweenInfo.new(duration, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                    {BackgroundTransparency = originalTransparency}
                ):Play()
                for _, child in pairs(object:GetChildren()) do
                    if child:IsA("TextLabel") or child:IsA("TextButton") then
                        child.TextTransparency = 1
                        game:GetService("TweenService"):Create(
                            child,
                            TweenInfo.new(duration + 0.2, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                            {TextTransparency = 0}
                        ):Play()
                    elseif child:IsA("ImageLabel") or child:IsA("ImageButton") then
                        child.ImageTransparency = 1
                        game:GetService("TweenService"):Create(
                            child,
                            TweenInfo.new(duration + 0.2, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                            {ImageTransparency = 0}
                        ):Play()
                    end
                end
            end,
            buttonPress = function(button)
                button.MouseButton1Down:Connect(function()
                    game:GetService("TweenService"):Create(
                        button,
                        TweenInfo.new(0.1, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                        {Size = UDim2.new(button.Size.X.Scale * 0.95, button.Size.X.Offset, 
                                          button.Size.Y.Scale * 0.95, button.Size.Y.Offset)}
                    ):Play()
                end)
                button.MouseButton1Up:Connect(function()
                    game:GetService("TweenService"):Create(
                        button,
                        TweenInfo.new(0.2, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out),
                        {Size = UDim2.new(button.Size.X.Scale / 0.95, button.Size.X.Offset, 
                                          button.Size.Y.Scale / 0.95, button.Size.Y.Offset)}
                    ):Play()
                end)
            end,
            hover = function(button)
                local originalColor = button.BackgroundColor3
                local hoverColor = Color3.new(
                    math.min(originalColor.R * 1.2, 1),
                    math.min(originalColor.G * 1.2, 1),
                    math.min(originalColor.B * 1.2, 1)
                )
                button.MouseEnter:Connect(function()
                    game:GetService("TweenService"):Create(
                        button,
                        TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                        {BackgroundColor3 = hoverColor}
                    ):Play()
                end)
                button.MouseLeave:Connect(function()
                    game:GetService("TweenService"):Create(
                        button,
                        TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                        {BackgroundColor3 = originalColor}
                    ):Play()
                end)
            end,
            applyGradient = function(frame, angle)
                local gradient = Instance.new("UIGradient")
                gradient.Color = ColorSequence.new({
                    ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 45)),
                    ColorSequenceKeypoint.new(1, Color3.fromRGB(25, 25, 32))
                })
                gradient.Rotation = angle or 45
                gradient.Parent = frame
                return gradient
            end,
            applyShadow = function(frame)
                local shadow = Instance.new("ImageLabel")
                shadow.Name = "Shadow"
                shadow.BackgroundTransparency = 1
                shadow.Image = "rbxassetid://5554236805"
                shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
                shadow.ImageTransparency = 0.5
                shadow.Position = UDim2.new(0, -15, 0, -15)
                shadow.Size = UDim2.new(1, 30, 1, 30)
                shadow.ScaleType = Enum.ScaleType.Slice
                shadow.SliceCenter = Rect.new(23, 23, 277, 277)
                shadow.ZIndex = frame.ZIndex - 1
                shadow.Parent = frame
                return shadow
            end,
            applyRounding = function(frame, radius)
                local corner = frame:FindFirstChildOfClass("UICorner")
                if corner then
                    corner.CornerRadius = UDim.new(radius or 0.1, 0)
                else
                    corner = Instance.new("UICorner")
                    corner.CornerRadius = UDim.new(radius or 0.1, 0)
                    corner.Parent = frame
                end
                return corner
            end,
            applyStroke = function(frame, color, thickness)
                local stroke = Instance.new("UIStroke")
                stroke.Color = color or Color3.fromRGB(80, 80, 90)
                stroke.Thickness = thickness or 1.5
                stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                stroke.Parent = frame
                return stroke
            end,
            tabSwitcher = function(tabContainer, duration)
                duration = duration or 0.5
                local function switchToTab(tabName)
                    local selectedTab = tabContainer:FindFirstChild(tabName)
                    if not selectedTab then return end
                    for _, tab in pairs(tabContainer:GetChildren()) do
                        if tab:IsA("Frame") and tab ~= selectedTab then
                            game:GetService("TweenService"):Create(
                                tab,
                                TweenInfo.new(duration, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                                {BackgroundTransparency = 1, Position = UDim2.new(0.05, 0, tab.Position.Y.Scale, 0)}
                            ):Play()
                            for _, child in pairs(tab:GetChildren()) do
                                if child:IsA("TextLabel") or child:IsA("TextButton") then
                                    game:GetService("TweenService"):Create(
                                        child,
                                        TweenInfo.new(duration * 0.7, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                                        {TextTransparency = 1}
                                    ):Play()
                                elseif child:IsA("ImageLabel") or child:IsA("ImageButton") then
                                    game:GetService("TweenService"):Create(
                                        child,
                                        TweenInfo.new(duration * 0.7, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                                        {ImageTransparency = 1}
                                    ):Play()
                                elseif child:IsA("Frame") then
                                    game:GetService("TweenService"):Create(
                                        child,
                                        TweenInfo.new(duration * 0.7, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                                        {BackgroundTransparency = 1}
                                    ):Play()
                                end
                            end
                            delay(duration, function()
                                tab.Visible = false
                            end)
                        end
                    end
                    selectedTab.Position = UDim2.new(-0.05, 0, selectedTab.Position.Y.Scale, 0)
                    selectedTab.BackgroundTransparency = 1
                    selectedTab.Visible = true
                    game:GetService("TweenService"):Create(
                        selectedTab,
                        TweenInfo.new(duration, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                        {BackgroundTransparency = 0, Position = UDim2.new(0, 0, selectedTab.Position.Y.Scale, 0)}
                    ):Play()
                    for _, child in pairs(selectedTab:GetChildren()) do
                        if child:IsA("TextLabel") or child:IsA("TextButton") then
                            child.TextTransparency = 1
                            game:GetService("TweenService"):Create(
                                child,
                                TweenInfo.new(duration, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                                {TextTransparency = 0}
                            ):Play()
                        elseif child:IsA("ImageLabel") or child:IsA("ImageButton") then
                            child.ImageTransparency = 1
                            game:GetService("TweenService"):Create(
                                child,
                                TweenInfo.new(duration, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                                {ImageTransparency = 0}
                            ):Play()
                        elseif child:IsA("Frame") then
                            child.BackgroundTransparency = 1
                            game:GetService("TweenService"):Create(
                                child,
                                TweenInfo.new(duration, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
                                {BackgroundTransparency = 0}
                            ):Play()
                        end
                    end
                end
                return switchToTab
            end
        }
    end

    -- Создание GUI
    G2L["1"] = Instance.new("ScreenGui", gethui())
    G2L["1"]["Name"] = "DeltaGui"
    G2L["1"]["ZIndexBehavior"] = Enum.ZIndexBehavior.Sibling

    G2L["2"] = Instance.new("Folder", G2L["1"])
    G2L["2"]["Name"] = "KeySystem"

    G2L["3"] = Instance.new("Frame", G2L["2"])
    G2L["3"]["BackgroundColor3"] = Color3.fromRGB(22, 22, 28)
    G2L["3"]["Size"] = UDim2.new(0.76389479637146, 0, 0.4519544541835785, 0)
    G2L["3"]["Position"] = UDim2.new(0.11660274863243103, 0, 0.275360107421875, 0)
    G2L["3"]["Name"] = "MainKeyFrame"
    G2L["3"]["Visible"] = true -- Устанавливаем видимость сразу

    local gradient = Instance.new("UIGradient", G2L["3"])
    gradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 45)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(22, 22, 30))
    })
    gradient.Rotation = 45

    local shadow = Instance.new("ImageLabel", G2L["3"])
    shadow.Name = "Shadow"
    shadow.BackgroundTransparency = 1
    shadow.Image = "rbxassetid://5554236805"
    shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    shadow.ImageTransparency = 0.5
    shadow.Position = UDim2.new(0, -15, 0, -15)
    shadow.Size = UDim2.new(1, 30, 1, 30)
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(23, 23, 277, 277)
    shadow.ZIndex = G2L["3"].ZIndex - 1

    G2L["4"] = Instance.new("Frame", G2L["3"])
    G2L["4"]["BackgroundColor3"] = Color3.fromRGB(255, 255, 255)
    G2L["4"]["BackgroundTransparency"] = 1
    G2L["4"]["Size"] = UDim2.new(0.11645293235778809, 0, 1.0000001192092896, 0)
    G2L["4"]["Name"] = "SideFrame"

    G2L["5"] = Instance.new("ImageLabel", G2L["4"])
    G2L["5"]["BackgroundColor3"] = Color3.fromRGB(255, 0, 0)
    G2L["5"]["Image"] = "rbxassetid://117511501336791"
    G2L["5"]["Size"] = UDim2.new(1.0185703039169312, 0, 0.3629874587059021, 0)
    G2L["5"]["Name"] = "Logo"
    G2L["5"]["BackgroundTransparency"] = 1
    G2L["5"]["Position"] = UDim2.new(-0.018570121377706528, 0, 0.06093369424343109, 0)

    local function pulseLogo()
        while G2L["5"].Parent do
            game:GetService("TweenService"):Create(
                G2L["5"],
                TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
                {Size = UDim2.new(1.0185703039169312 * 1.05, 0, 0.3629874587059021 * 1.05, 0)}
            ):Play()
            wait(1.5)
            game:GetService("TweenService"):Create(
                G2L["5"],
                TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
                {Size = UDim2.new(1.0185703039169312, 0, 0.3629874587059021, 0)}
            ):Play()
            wait(1.5)
        end
    end
    spawn(pulseLogo)

    G2L["6"] = Instance.new("UIAspectRatioConstraint", G2L["5"])
    G2L["6"]["AspectRatio"] = 0.9946909546852112

    G2L["7"] = Instance.new("Frame", G2L["4"])
    G2L["7"]["BackgroundColor3"] = Color3.fromRGB(80, 80, 90)
    G2L["7"]["Size"] = UDim2.new(0, 0, 0.9890000224113464, 0)
    G2L["7"]["BorderColor3"] = Color3.fromRGB(80, 80, 90)
    G2L["7"]["Position"] = UDim2.new(1, 0, 0.004999999888241291, 0)

    G2L["8"] = Instance.new("UICorner", G2L["7"])
    G2L["8"]["CornerRadius"] = UDim.new(0.12, 0)

    G2L["9"] = Instance.new("Frame", G2L["3"])
    G2L["9"]["BackgroundColor3"] = Color3.fromRGB(15, 15, 20)
    G2L["9"]["BackgroundTransparency"] = 0.2
    G2L["9"]["Size"] = UDim2.new(0.8421385884284973, 0, 0.5559701919555664, 0)
    G2L["9"]["BorderColor3"] = Color3.fromRGB(16, 16, 16)
    G2L["9"]["Position"] = UDim2.new(0.13729187846183777, 0, 0.11194030940532684, 0)
    G2L["9"]["Name"] = "SideTextbox"

    local textboxStroke = Instance.new("UIStroke", G2L["9"])
    textboxStroke.Color = Color3.fromRGB(80, 80, 100)
    textboxStroke.Thickness = 1.5
    textboxStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    G2L["a"] = Instance.new("TextBox", G2L["9"])
    G2L["a"]["TextSize"] = 13
    G2L["a"]["TextXAlignment"] = Enum.TextXAlignment.Left
    G2L["a"]["TextYAlignment"] = Enum.TextYAlignment.Top
    G2L["a"]["BackgroundColor3"] = Color3.fromRGB(25, 25, 30)
    G2L["a"]["TextColor3"] = Color3.fromRGB(240, 240, 240)
    G2L["a"]["FontFace"] = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Bold, Enum.FontStyle.Normal)
    G2L["a"]["BackgroundTransparency"] = 1
    G2L["a"]["PlaceholderText"] = "Enter Your Key Here"
    G2L["a"]["PlaceholderColor3"] = Color3.fromRGB(180, 180, 180)
    G2L["a"]["Size"] = UDim2.new(0.9665210843086243, 0, 0.8322147727012634, 0)
    G2L["a"]["BorderColor3"] = Color3.fromRGB(16, 16, 16)
    G2L["a"]["Text"] = ""
    G2L["a"]["Position"] = UDim2.new(0.020378457382321358, 0, 0.08053690940141678, 0)
    G2L["a"]["Name"] = "MainTextBox"
    G2L["a"]["ClearTextOnFocus"] = false

    G2L["b"] = Instance.new("UICorner", G2L["a"])
    G2L["b"]["CornerRadius"] = UDim.new(0.12, 0)

    G2L["c"] = Instance.new("UICorner", G2L["9"])
    G2L["c"]["CornerRadius"] = UDim.new(0.12, 0)

    G2L["d"] = Instance.new("UICorner", G2L["3"])
    G2L["d"]["CornerRadius"] = UDim.new(0.12, 0)

    G2L["e"] = Instance.new("UIAspectRatioConstraint", G2L["3"])
    G2L["e"]["AspectRatio"] = 3.0439562797546387

    G2L["f"] = Instance.new("Frame", G2L["3"])
    G2L["f"]["BackgroundColor3"] = Color3.fromRGB(235, 30, 70)
    G2L["f"]["Size"] = UDim2.new(0.19932664930820465, 0, 0.1760299652814865, 0)
    G2L["f"]["Position"] = UDim2.new(0.13534526526927948, 0, 0.7490636706352234, 0)
    G2L["f"]["Name"] = "Continue"

    local continueShadow = Instance.new("ImageLabel", G2L["f"])
    continueShadow.Name = "Shadow"
    continueShadow.BackgroundTransparency = 1
    continueShadow.Image = "rbxassetid://5554236805"
    continueShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    continueShadow.ImageTransparency = 0.7
    continueShadow.Position = UDim2.new(0, -5, 0, -5)
    continueShadow.Size = UDim2.new(1, 10, 1, 10)
    continueShadow.ScaleType = Enum.ScaleType.Slice
    continueShadow.SliceCenter = Rect.new(23, 23, 277, 277)
    continueShadow.ZIndex = G2L["f"].ZIndex - 1

    local continueGradient = Instance.new("UIGradient", G2L["f"])
    continueGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 50, 90)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(220, 20, 60))
    })
    continueGradient.Rotation = 90

    G2L["10"] = Instance.new("TextButton", G2L["f"])
    G2L["10"]["TextWrapped"] = true
    G2L["10"]["TextScaled"] = true
    G2L["10"]["BackgroundColor3"] = Color3.fromRGB(255, 50, 90)
    G2L["10"]["TextSize"] = 14
    G2L["10"]["FontFace"] = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Bold, Enum.FontStyle.Normal)
    G2L["10"]["TextColor3"] = Color3.fromRGB(252, 252, 252)
    G2L["10"]["Size"] = UDim2.new(0.8136826753616333, 0, 1, 0)
    G2L["10"]["Text"] = "Continue"
    G2L["10"]["Position"] = UDim2.new(-0.004637444857507944, 0, 0, 0)
    G2L["10"]["BackgroundTransparency"] = 1

    G2L["10"].MouseEnter:Connect(function()
        game:GetService("TweenService"):Create(
            G2L["f"],
            TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
            {BackgroundColor3 = Color3.fromRGB(255, 70, 100)}
        ):Play()
    end)

    G2L["10"].MouseLeave:Connect(function()
        game:GetService("TweenService"):Create(
            G2L["f"],
            TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
            {BackgroundColor3 = Color3.fromRGB(235, 30, 70)}
        ):Play()
    end)

    G2L["10"].MouseButton1Down:Connect(function()
        game:GetService("TweenService"):Create(
            G2L["f"],
            TweenInfo.new(0.1, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
            {Size = UDim2.new(G2L["f"].Size.X.Scale * 0.95, 0, G2L["f"].Size.Y.Scale * 0.95, 0)}
        ):Play()
    end)

    G2L["10"].MouseButton1Up:Connect(function()
        game:GetService("TweenService"):Create(
            G2L["f"],
            TweenInfo.new(0.2, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out),
            {Size = UDim2.new(G2L["f"].Size.X.Scale / 0.95, 0, G2L["f"].Size.Y.Scale / 0.95, 0)}
        ):Play()
    end)

    G2L["11"] = Instance.new("UICorner", G2L["10"])
    G2L["11"]["CornerRadius"] = UDim.new(0.5, 0)

    G2L["12"] = Instance.new("LocalScript", G2L["10"])

    G2L["13"] = Instance.new("UITextSizeConstraint", G2L["10"])
    G2L["13"]["MaxTextSize"] = 14

    G2L["14"] = Instance.new("UICorner", G2L["f"])
    G2L["14"]["CornerRadius"] = UDim.new(0.5, 0)

    G2L["15"] = Instance.new("ImageLabel", G2L["f"])
    G2L["15"]["BackgroundColor3"] = Color3.fromRGB(255, 0, 0)
    G2L["15"]["Image"] = "rbxassetid://125787475899820"
    G2L["15"]["Size"] = UDim2.new(0.1541670262813568, 0, 0.5313842296600342, 0)
    G2L["15"]["BackgroundTransparency"] = 1
    G2L["15"]["Position"] = UDim2.new(0.6577792763710022, 0, 0.2479792982339859, 0)

    -- Применение анимации появления
    local animations = createUIAnimations()
    animations.appear(G2L["3"])
end

-- Автоматический запуск GUI при старте скрипта
onValidKey()
